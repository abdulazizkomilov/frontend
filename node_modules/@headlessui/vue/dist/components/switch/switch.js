import{Fragment as T,computed as d,defineComponent as m,h,inject as H,provide as M,ref as y,watch as B,onMounted as P}from"vue";import{render as b,compact as j,omit as G}from'../../utils/render.js';import{useId as V}from'../../hooks/use-id.js';import{Keys as v}from'../../keyboard.js';import{Label as F,useLabels as I}from'../label/label.js';import{Description as O,useDescriptions as A}from'../description/description.js';import{useResolveButtonType as $}from'../../hooks/use-resolve-button-type.js';import{Hidden as N,Features as U}from'../../internal/hidden.js';import{attemptSubmit as _}from'../../utils/form.js';import{useControllable as q}from'../../hooks/use-controllable.js';import{dom as z}from'../../utils/dom.js';let S=Symbol("GroupContext"),ae=m({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(l,{slots:p,attrs:a}){let o=y(null),f=I({name:"SwitchLabel",props:{htmlFor:d(()=>{var r;return(r=o.value)==null?void 0:r.id}),onClick(r){o.value&&(r.currentTarget.tagName==="LABEL"&&r.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),t=A({name:"SwitchDescription"});return M(S,{switchRef:o,labelledby:f,describedby:t}),()=>b({theirProps:l,ourProps:{},slot:{},slots:p,attrs:a,name:"SwitchGroup"})}}),ue=m({name:"Switch",emits:{"update:modelValue":l=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${V()}`}},inheritAttrs:!1,setup(l,{emit:p,attrs:a,slots:o,expose:f}){let t=H(S,null),[i,r]=q(d(()=>l.modelValue),e=>p("update:modelValue",e),d(()=>l.defaultChecked));function s(){r(!i.value)}let w=y(null),u=t===null?w:t.switchRef,g=$(d(()=>({as:l.as,type:a.type})),u);f({el:u,$el:u});function k(e){e.preventDefault(),s()}function C(e){e.key===v.Space?(e.preventDefault(),s()):e.key===v.Enter&&_(e.currentTarget)}function E(e){e.preventDefault()}let c=d(()=>{var e,n;return(n=(e=z(u))==null?void 0:e.closest)==null?void 0:n.call(e,"form")});return P(()=>{B([c],()=>{if(!c.value||l.defaultChecked===void 0)return;function e(){r(l.defaultChecked)}return c.value.addEventListener("reset",e),()=>{var n;(n=c.value)==null||n.removeEventListener("reset",e)}},{immediate:!0})}),()=>{let{id:e,name:n,value:L,form:D,...R}=l,K={checked:i.value},x={id:e,ref:u,role:"switch",type:g.value,tabIndex:0,"aria-checked":i.value,"aria-labelledby":t==null?void 0:t.labelledby.value,"aria-describedby":t==null?void 0:t.describedby.value,onClick:k,onKeyup:C,onKeypress:E};return h(T,[n!=null&&i.value!=null?h(N,j({features:U.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:i.value,form:D,name:n,value:L})):null,b({ourProps:x,theirProps:{...a,...G(R,["modelValue","defaultChecked"])},slot:K,attrs:a,slots:o,name:"Switch"})])}}}),de=F,ce=O;export{ue as Switch,ce as SwitchDescription,ae as SwitchGroup,de as SwitchLabel};
